<div class="products">
  <aside>
    <%= render 'shared/navigation/taxonomies', taxon: @taxon %>
    <%= render 'shared/search/filters', taxon: @taxon if @taxon.children.empty? %>
  </aside>
  <section>
    <h1 class="products__taxon-title"><%= @taxon.name %></h1>
    <% if @taxon.icon.attached? %>
      <%= image_tag @taxon.icon.url(:original), class: "taxon-icon" %>
    <% end %>
    <%= raw(@taxon.description.presence || t('spree.taxon_has_no_description')) %>


    <%= render 'products/products', products: @products, taxon: @taxon %>

    <% unless params[:keywords].present? %>
      <% cache [I18n.locale, @taxon] do %>
        <%= render partial: 'products/products_by_taxon', collection: @taxon.children %>
      <% end %>
    <% end %>
  </section>
</div>
