<div class="product-submit">
  <%= render 'cart_line_items/product_availability', product: product %>

  <div class="horizontal-input-group">
    <div class="horizontal-input-group__input">
      <div class="text-input">
        <%= text_field_tag :quantity, 1, type: :number, min: 1 %>
      </div>
    </div>
    <div class="horizontal-input-group__action">
      <%= button_tag(
        t('spree.add_to_cart'),
        class: 'button-primary',
        id: 'add-to-cart-button'
      ) %>
    </div>
    <button id="buy-now-button" class="button-secondary">
      <%= t('spree.buy_now') %>
    </button>
  </div>
</div>
<script>
  function buyNow() {
    var variantId = <%= @product.master.id %>;
    var quantity = document.getElementById('quantity').value;
    window.location.href = '/checkout?variant_id=' + variantId + '&quantity=' + quantity;
  }

  document.getElementById('buy-now-button').addEventListener('click', function() {
    buyNow();
  });
</script>
